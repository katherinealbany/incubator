---
###################################################################################################

kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: {{ if (has (datasource "data") "HELM_SERVICE_ACCOUNT") }}{{ (datasource "data").HELM_SERVICE_ACCOUNT }}{{ else }}{{ .Env.HELM_SERVICE_ACCOUNT }}{{ end }}
  namespace: {{ if (has (datasource "data") "HELM_NAMESPACE") }}{{ (datasource "data").HELM_NAMESPACE }}{{ else }}{{ .Env.HELM_NAMESPACE }}{{ end }}
roleRef:
  kind: {{ if (has (datasource "data") "HELM_ROLE_REFERENCE_KIND") }}{{ (datasource "data").HELM_ROLE_REFERENCE_KIND }}{{ else }}{{ .Env.HELM_ROLE_REFERENCE_KIND }}{{ end }}
  name: {{ if (has (datasource "data") "HELM_ROLE_REFERENCE_NAME") }}{{ (datasource "data").HELM_ROLE_REFERENCE_NAME }}{{ else }}{{ .Env.HELM_ROLE_REFERENCE_NAME }}{{ end }}
  apiGroup: rbac.authorization.k8s.io
subjects:
  - name: {{ if (has (datasource "data") "HELM_SERVICE_ACCOUNT") }}{{ (datasource "data").HELM_SERVICE_ACCOUNT }}{{ else }}{{ .Env.HELM_SERVICE_ACCOUNT }}{{ end }}
    kind: ServiceAccount
    namespace: {{ if (has (datasource "data") "HELM_NAMESPACE") }}{{ (datasource "data").HELM_NAMESPACE }}{{ else }}{{ .Env.HELM_NAMESPACE }}{{ end }}

###################################################################################################
...
